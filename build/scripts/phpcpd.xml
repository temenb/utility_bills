<project default="phpcpd">

    <property name="phpcpd-result" location="${artifacts-dir}/pmd-cpd.xml"/>

    <target name="phpcpd" depends="phpcpd-clear-artifacts" description="Find duplicate code using PHPCPD">
        <exec executable="${bin-dir}/phpcpd">
            <arg value="--log-pmd"/>
            <arg value="${phpcpd-result}"/>
            <arg path="${source-dir}"/>
            <arg path="${app-dir}/Resources"/>
        </exec>
    </target>

    <target name="phpcpd-clear-artifacts">
        <delete dir="${phpcpd-result}" failonerror="true" />
        <mkdir  dir="${artifacts-dir}"/>
    </target>

</project>
